#!/usr/bin/env bash

#============================================================
#
#  ALIASES
#
#============================================================

alias ...='cd ../../'
alias ..='cd ../'
alias be='bundle exec '
alias c='clear'
alias cl='fc -e -|pbcopy' # Copy output of last command to clipboard
alias cp='cp -i'
alias df='df -kTh'
alias du='du -kh' # Makes a more readable output.
alias edit='vim'
alias em='open -a Emacs.app'
alias find_dups="find . -type f -exec md5 '{}' ';' | sort | uniq -f 3 -d | sed -e \"s/.*(\(.*\)).*/\1/\""
alias h='history'
alias he='history -a' # export history
alias hi='history -n' # import history
alias ip='curl icanhazip.com' # Get your current public IP
alias j='jobs -l'
alias libpath='echo -e ${LD_LIBRARY_PATH//:/\\n}'
alias mkdir='mkdir -p'
alias mv='mv -i' # Prevents accidentally clobbering files.
alias path='echo -e ${PATH//:/\\n}' # Pretty-print of some PATH variables
alias pg_restart="pg_ctl -D /usr/local/var/postgres -m i -l /usr/local/var/postgres/server.log restart"
alias pg_start="pg_ctl -D /usr/local/var/postgres -l /usr/local/var/postgres/server.log start"
alias pg_stop="pg_ctl -D /usr/local/var/postgres stop"
alias rm='rm -i'
alias ta='tmux attach -t'
alias tm='tm'
alias ts='tmux ls'
alias vi=vim
alias which='type -a'
# http://www.commandlinefu.com/commands/view/3555/find-duplicate-files-based-on-size-first-then-md5-hash
alias watch_elixir="find . -name '*.ex' -o -name '*.exs' | entr mix test"

#-------------------------------------------------------------
# The 'ls' family (this assumes you use a recent GNU ls).
#-------------------------------------------------------------

# Detect which `ls` flavor is in use
if ls --color > /dev/null 2>&1; then # GNU `ls`
  colorflag='--color'
else # macOS `ls`
  colorflag='-G'
fi
export LS_OPTS='--color=auto'
alias ls='ls ${LS_OPTS}'

alias la="ls -aF ${colorflag}"
alias ld='ls -ld'
alias ll='ls -l'
alias lt='ls -At1 && echo "------Oldest--"'
alias ltr='ls -Art1 && echo "------Newest--"'

#--------------------------------------------------------------
#  Git
#--------------------------------------------------------------

# alias git_log_work='git log --all --author=keithsalisbury | grep Date | awk \'{print " : "$2" "$4" "$3" "$6}\' | uniq -c | sort -k5M -k4'
alias a='atom'
alias amend_commit='git add . && git commit --amend -C HEAD'
alias g='git'
alias gac='git add . && git commit'
alias gbd="git log --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr)%Creset' --abbrev-commit --date=relative master.."
alias gbgrep="git branch -a | tr -d \* | xargs git grep" # =>  $ git grep_all <regexp>
alias gbr='for k in `git branch|perl -pe s/^..//`;do echo -e `git show --pretty=format:"%Cgreen%ci %Cblue%cr%Creset" $k|head -n 1`\\t$k;done|sort -r'
alias gfr='git fetch -p && git reset --hard origin/master'
alias gfr='git fetch -p;git reset --hard origin/master'
alias git_delete_merged_branches='git branch --merged | grep -v "\*" | xargs -n 1 git branch -d'
alias git_delete_merged="git branch -r --merged | grep -v master | sed 's/origin\///' | xargs -n 1 git push --delete origin"
alias glog="git log --graph --pretty=format:'%Cred%h%Creset %an: %s - %Creset %C(yellow)%d%Creset %Cgreen(%cr)%Creset' --abbrev-commit --date=relative"
alias grbm='git fetch -p;git rebase origin/master; git push --force-with-lease'
alias greset='git co master; git fetch -p; git reset --hard origin/master'
alias gs='git status -sb'
alias new_quest='git checkout -b'
alias publish_game='git push'
alias save_game='git add . && git commit -m'

#--------------------------------------------------------------
#  Docker
#--------------------------------------------------------------

alias dci='docker rmi -f $(docker images --filter "dangling=true" -q --no-trunc)'
alias dc='docker rm $(docker ps -qa --no-trunc --filter "status=exited")'
